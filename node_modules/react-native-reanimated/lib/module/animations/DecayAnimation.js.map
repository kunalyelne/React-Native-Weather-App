{"version":3,"sources":["DecayAnimation.js"],"names":["Animation","decay","block","clockRunning","startClock","stopClock","cond","Clock","AnimatedValue","DecayAnimation","constructor","config","_deceleration","deceleration","undefined","_velocity","velocity","start","value","_clock","state","finished","position","time","stop","getDefaultState"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,KAAT,EAAgBC,YAAhB,EAA8BC,UAA9B,EAA0CC,SAA1C,EAAqDC,IAArD,QAAiE,SAAjE;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,aAAP,MAA0B,+BAA1B;;AAEA,MAAMC,cAAN,SAA6BT,SAA7B,CAAuC;AACrCU,EAAAA,WAAW,CAACC,MAAD,EAAS;AAClB;AACA,SAAKC,aAAL,GACED,MAAM,CAACE,YAAP,KAAwBC,SAAxB,GAAoCH,MAAM,CAACE,YAA3C,GAA0D,KAD5D;AAEA,SAAKE,SAAL,GAAiBJ,MAAM,CAACK,QAAxB;AACD;;AAEDC,EAAAA,KAAK,CAACC,KAAD,EAAQ;AACX,SAAKC,MAAL,GAAc,IAAIZ,KAAJ,EAAd;AACA,UAAMa,KAAK,GAAG;AACZC,MAAAA,QAAQ,EAAE,IAAIb,aAAJ,CAAkB,CAAlB,CADE;AAEZQ,MAAAA,QAAQ,EAAE,IAAIR,aAAJ,CAAkB,KAAKO,SAAvB,CAFE;AAGZO,MAAAA,QAAQ,EAAEJ,KAHE;AAIZK,MAAAA,IAAI,EAAE,IAAIf,aAAJ,CAAkB,CAAlB;AAJM,KAAd;AAOA,UAAMG,MAAM,GAAG;AACbE,MAAAA,YAAY,EAAE,KAAKD;AADN,KAAf;AAIA,WAAOV,KAAK,CAAC,CACXI,IAAI,CAACH,YAAY,CAAC,KAAKgB,MAAN,CAAb,EAA4B,CAA5B,EAA+B,CAACf,UAAU,CAAC,KAAKe,MAAN,CAAX,CAA/B,CADO,EAEXlB,KAAK,CAAC,KAAKkB,MAAN,EAAcC,KAAd,EAAqBT,MAArB,CAFM,EAGXL,IAAI,CAACc,KAAK,CAACC,QAAP,EAAiBhB,SAAS,CAAC,KAAKc,MAAN,CAA1B,CAHO,CAAD,CAAZ;AAKD;;AAEDK,EAAAA,IAAI,GAAG,CACL;AACD;;AAED,SAAOC,eAAP,GAAyB;AACvB,WAAO;AACLH,MAAAA,QAAQ,EAAE,IAAId,aAAJ,CAAkB,CAAlB,CADL;AAELa,MAAAA,QAAQ,EAAE,IAAIb,aAAJ,CAAkB,CAAlB,CAFL;AAGLe,MAAAA,IAAI,EAAE,IAAIf,aAAJ,CAAkB,CAAlB,CAHD;AAILQ,MAAAA,QAAQ,EAAE,IAAIR,aAAJ,CAAkB,CAAlB;AAJL,KAAP;AAMD;;AAvCoC;;AA0CvC,eAAeC,cAAf","sourcesContent":["import Animation from './Animation';\n\nimport decay from './decay';\nimport { block, clockRunning, startClock, stopClock, cond } from '../base';\nimport Clock from '../core/AnimatedClock';\nimport AnimatedValue from '../core/InternalAnimatedValue';\n\nclass DecayAnimation extends Animation {\n  constructor(config) {\n    super();\n    this._deceleration =\n      config.deceleration !== undefined ? config.deceleration : 0.998;\n    this._velocity = config.velocity;\n  }\n\n  start(value) {\n    this._clock = new Clock();\n    const state = {\n      finished: new AnimatedValue(0),\n      velocity: new AnimatedValue(this._velocity),\n      position: value,\n      time: new AnimatedValue(0),\n    };\n\n    const config = {\n      deceleration: this._deceleration,\n    };\n\n    return block([\n      cond(clockRunning(this._clock), 0, [startClock(this._clock)]),\n      decay(this._clock, state, config),\n      cond(state.finished, stopClock(this._clock)),\n    ]);\n  }\n\n  stop() {\n    // not implemented yet\n  }\n\n  static getDefaultState() {\n    return {\n      position: new AnimatedValue(0),\n      finished: new AnimatedValue(0),\n      time: new AnimatedValue(0),\n      velocity: new AnimatedValue(0),\n    };\n  }\n}\n\nexport default DecayAnimation;\n"]}